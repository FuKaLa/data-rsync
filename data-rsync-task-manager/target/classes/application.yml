spring:
  application:
    name: data-rsync-task-manager
  
  # 数据库配置
  datasource:
    url: ${spring.datasource.url:jdbc:mysql://localhost:3306/data_rsync?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai}
    username: ${spring.datasource.username:root}
    password: ${spring.datasource.password:123456}
    driver-class-name: ${spring.datasource.driver-class-name:com.mysql.cj.jdbc.Driver}
  
  # JPA 配置
  jpa:
    hibernate:
      ddl-auto: ${spring.jpa.hibernate.ddl-auto:update}
    show-sql: ${spring.jpa.show-sql:true}
    database-platform: ${spring.jpa.database-platform:org.hibernate.dialect.MySQL8Dialect}
  
  # Redis 配置
  redis:
    host: ${spring.redis.host:localhost}
    port: ${spring.redis.port:6379}
    password: ${spring.redis.password:}
    database: ${spring.redis.database:1}
  
  # Nacos 配置
  cloud:
    nacos:
      discovery:
        server-addr: ${spring.cloud.nacos.discovery.server-addr:localhost:8848}
        namespace: ${spring.cloud.nacos.discovery.namespace:public}
      config:
        server-addr: ${spring.cloud.nacos.config.server-addr:localhost:8848}
        namespace: ${spring.cloud.nacos.config.namespace:public}
        file-extension: ${spring.cloud.nacos.config.file-extension:yaml}
        group: ${spring.cloud.nacos.config.group:DEFAULT_GROUP}

# 服务器配置
server:
  port: ${server.port:8084}
  servlet:
    context-path: ${server.servlet.context-path:/}

# 健康检查配置
management:
  endpoints:
    web:
      exposure:
        include: ${management.endpoints.web.exposure.include:health,info,metrics,prometheus}

# XXL-Job 配置
xxl:
  job:
    admin:
      addresses: ${xxl.job.admin.addresses:http://localhost:8080/xxl-job-admin}
    executor:
      appname: ${xxl.job.executor.appname:data-rsync-task-manager}
      ip: ${xxl.job.executor.ip:}
      port: ${xxl.job.executor.port:9999}
      logpath: ${xxl.job.executor.logpath:/data/applogs/xxl-job/jobhandler}
      logretentiondays: ${xxl.job.executor.logretentiondays:30}
    accessToken: ${xxl.job.accessToken:default_token}

# 定时任务配置
task:
  scheduled:
    enabled: ${task.scheduled.enabled:true}
    cron: ${task.scheduled.cron:0/30 * * * * ?}  # 每30秒执行一次

# 日志配置
logging:
  level:
    root: ${logging.level.root:info}
    com.data.rsync.task.manager: ${logging.level.com.data.rsync.task.manager:debug}
  pattern:
    console: ${logging.pattern.console:"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"}
    file: ${logging.pattern.file:"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"}
  file:
    name: ${logging.file.name:/data/applogs/data-rsync-task-manager/data-rsync-task-manager.log}
