# Data-Rsync Nacos配置文件
# 生成时间: 2026-02-02

# 全局配置
data:
  rsync:
    # 数据库配置
    database:
      url: jdbc:mysql://localhost:3306/data_rsync?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
      username: root
      password: 123456
      maxConnections: 100
      connectionTimeout: 30000
      socketTimeout: 60000

    # Milvus向量数据库配置
    milvus:
      host: localhost
      port: 19530
      username: root
      password: 
      collectionName: data_rsync_collection
      vectorDimension: 768
      batchSize: 1000
      maxRetries: 3

    # Kafka配置
    kafka:
      bootstrapServers: localhost:9092
      groupId: data-rsync-group
      topic: data-rsync-topic
      maxPollRecords: 500
      sessionTimeout: 30000
      heartbeatInterval: 10000

    # Redis配置
    redis:
      host: localhost
      port: 6379
      password: 
      database: 0
      maxTotal: 100
      maxIdle: 50
      minIdle: 10
      maxWaitMillis: 30000

    # 任务配置
    task:
      batchSize: 1000
      threadPoolSize: 10
      maxRetryTimes: 3
      retryInterval: 5000
      timeout: 3600000

    # 监控配置
    monitor:
      prometheusEndpoint: /actuator/prometheus
      grafanaUrl: http://localhost:3000
      alertThreshold: 90
      alertChannels: email,sms

    # 安全配置
    security:
      jwtSecret: data-rsync-jwt-secret-key-2026
      jwtExpiration: 86400000
      encryptionKey: data-rsync-encryption-key-2026
      enableSsl: false

# 应用配置
spring:
  application:
    name: data-rsync
  cloud:
    nacos:
      config:
        server-addr: 127.0.0.1:8848
        namespace: public
        group: DEFAULT_GROUP
        file-extension: yml
      discovery:
        server-addr: 127.0.0.1:8848
        namespace: public
        group: DEFAULT_GROUP

# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /data-rsync
  tomcat:
    max-threads: 200
    min-spare-threads: 20

# 日志配置
logging:
  level:
    root: info
    com.data.rsync: debug
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'
    file: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'
  file:
    name: logs/data-rsync.log
    max-size: 10MB
    max-history: 7

# Actuator配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

# 开发环境配置
---
spring:
  profiles:
    active: dev
  cloud:
    nacos:
      config:
        namespace: dev

# 生产环境配置
---
spring:
  profiles:
    active: prod
  cloud:
    nacos:
      config:
        namespace: prod

# 测试环境配置
---
spring:
  profiles:
    active: test
  cloud:
    nacos:
      config:
        namespace: test